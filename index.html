<script>
/* ---------- SCREEN CONTROL ---------- */
const show = id => {
  document.querySelectorAll('.screen')
    .forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
};

/* ---------- TIMER ---------- */
let timeLeft = 120;
let timer;
let finished = false;

function startTimer(){
  timer = setInterval(()=>{
    timeLeft--;
    if(timeLeft <= 0 && !finished){
      clearInterval(timer);
      show('expired');
    }
  },1000);
}

/* ---------- START FLOW ---------- */
setTimeout(()=>{
  show('name');
  startTimer(); // â±ï¸ timer starts AFTER welcome
},2000);

/* ---------- DENY ---------- */
function deny(msg){
  alert(msg);
}

/* ---------- NAME ---------- */
function checkName(){
  if(nameInput.value.trim().toLowerCase()==="megan"){
    show('hello');
    setTimeout(()=>show('meet'),3000);
  } else deny("nice try ðŸ˜ I donâ€™t know you ðŸ˜‘");
}

/* ---------- MEET ---------- */
function checkMeet(){
  if(meetInput.value.trim().toLowerCase()==="publix"){
    show('smart');
    setTimeout(()=>show('question'),2000);
  } else deny("wait, who are you for real? ðŸ˜Ž");
}

/* ---------- QUESTIONS ---------- */
const questions = [
  {q:"I can be kept, but never seen. If Iâ€™m shared, I disappear.", a:"secret"},
  {q:"I have keys, but no locks. I have space, but no room.", a:"keyboard"},
  {q:"Iâ€™m tall when Iâ€™m young, and short when Iâ€™m old.", a:"candle"},
  {q:"Iâ€™m not alive, but I grow. I donâ€™t have lungs, but I need air.", a:"fire"},
  {q:"I go up and down, but never move.", a:"stairs"}
];

let index = 0;
const steps = document.querySelectorAll('.step');

function loadQuestion(){
  document.querySelector('#question p').innerHTML =
    `<strong>${questions[index].q}</strong>`;
  answerInput.value = "";
}

/* ---------- ANSWER ---------- */
function checkAnswer(){
  const val = answerInput.value.trim().toLowerCase();
  if(val === questions[index].a){
    steps[index].classList.add('active'); // 25% progress
    index++;

    if(index === questions.length){
      finished = true;
      clearInterval(timer);
      show('whatsappScreen');
    } else {
      loadQuestion();
    }
  } else {
    submitBtn.classList.add('shake');
    answerInput.value="";
    setTimeout(()=>submitBtn.classList.remove('shake'),400);
  }
}

/* ---------- INIT FIRST QUESTION ---------- */
loadQuestion();
</script>
